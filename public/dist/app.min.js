function e(e){return new Promise(function(r){setTimeout(r,e)})}function r(e){for(var r=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var o=t[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(r))return o.substring(r.length,o.length)}return""}function t(e,r,t){var n=new Date;n.setTime(n.getTime()+24*t*60*60*1e3);var o="expires="+n.toUTCString();document.cookie=e+"="+r+"; "+o}function n(e,r,t){e.open("POST",r,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send(t)}var o=Math.floor(5e3*Math.random())+1e3,a=new XMLHttpRequest,c=!1,s=!1,u=!1,i,d,l,m=document.querySelector("html"),v=document.querySelector("#main h1"),f=document.querySelector("body");e(o).then(function(){s||(i=Date.now(),c=!0,f.style.backgroundColor="#3D9970",v.innerHTML="CLICK NOW !",setTimeout(function(){u||(document.querySelector("#gif").className="",v.innerHTML="CLICK N...OH WAIT..")},2e3))}),m.addEventListener("mousedown",function(e){var o=Date.now();if(s&&location.reload(),!u){document.querySelector("#gif").className="hidden";var m=document.querySelector("#score");if(c){u=!0,m.className="",d=o-i,d>=2e3?v.innerHTML="zZz..You scored":v.innerHTML="You scored",document.querySelector(".result").innerHTML=d+"ms",n(a,"/check",d),a.onload=function(){var e=a.status>=200&&a.status<400;e?(l=a.responseText,"true"===l&&(document.querySelector("#save-leaderboard").className="save-leaderboard")):console.log("ajax check error")};var y=""==r("average")?d:parseInt(r("average")),g=Math.round((y+d)/2);t("average",g,365),document.querySelector(".avg").innerHTML=g;var h=""==r("best")?d:r("best");d<=h&&(h=d,t("best",h,365),document.querySelector(".new-record").className="new-record"),document.querySelector(".best").innerHTML=h}else s=!0,m.className="hidden",v.innerHTML="Oops! You clicked too earlier",f.style.backgroundColor="#704dab",document.querySelector(".message").innerHTML="Click anywhere to play again"}});var y=document.querySelector(".save");y.addEventListener("click",function(){var e={name:document.querySelector("#name").value,time:d},r="true"===l&&e.time;return r?(n(a,"/save",JSON.stringify(e)),void(a.onload=function(){var e=a.status>=200&&a.status<400;if(e){var r=JSON.parse(a.responseText);localStorage.setItem("onleaderboard",!r.hacker),localStorage.setItem("ishacker",r.hacker),window.location.href=r.redirect}})):(alertify.alert("Nice try "+e.name+"!",function(){document.querySelector(".save-leaderboard").className="hidden save-leaderboard"}),!1)});